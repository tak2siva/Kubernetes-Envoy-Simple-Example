{
   "listeners": [
      {
         "address": "tcp://0.0.0.0:80",
              "filters": [
               {
                  "name": "http_connection_manager",
                  "config": {
                     "codec_type": "auto",
                     "stat_prefix": "ingress_http",
                     "generate_request_id": true,
                     "tracing": {
                        "operation_name": "egress"
                     },
                     "route_config": {
                        "virtual_hosts": [
                           {
                              "name": "frontend",
                              "domains": [
                                 "*"
                              ],
                              "routes": [
                                 {
                                     "timeout_ms": 0,
                                     "prefix": "/app/1",
                                     "cluster": "app1",
                                     "prefix_rewrite": "/"
                                 },
                                 {
                                     "timeout_ms": 0,
                                     "prefix": "/app/2",
                                     "cluster": "app2",
                                     "prefix_rewrite": "/"
                                 }
                              ]
                           }
                        ]
                     },
                     "filters": [
                        {
                           "name": "router",
                           "config": {}
                        }
                     ]
                  }
               }
            ]
      },
      {
         "address": "tcp://0.0.0.0:50051",
              "filters": [
               {
                  "name": "http_connection_manager",
                  "config": {
                     "codec_type": "auto",
                     "stat_prefix": "ingress_http",
                     "generate_request_id": true,
                     "tracing": {
                        "operation_name": "egress"
                     },
                     "route_config": {
                        "virtual_hosts": [
                           {
                              "name": "frontend_grpc",
                              "domains": [
                                 "*"
                              ],
                              "routes": [
                                 {
                                     "timeout_ms": 0,
                                     "prefix": "/",
                                     "cluster": "app1_grpc"
                                 }
                              ]
                           }
                        ]
                     },
                     "filters": [
                        {
                           "name": "grpc_web",
                           "config": {}
                        }
                     ]
                  }
               }
            ]
      }
   ],
   "cluster_manager": {
      "clusters": [
         {
            "name": "app1",
            "connect_timeout_ms": 1,
            "type": "strict_dns",
            "lb_type": "round_robin",
            "hosts": [
               {
                  "url": "tcp://app1:80"
               }
            ]
         },
         {
            "name": "app1_grpc",
            "connect_timeout_ms": 1,
            "type": "strict_dns",
            "lb_type": "round_robin",
            "hosts": [
               {
                  "url": "tcp://app1:50051"
               }
            ]
         },
         {
            "name": "app2",
            "connect_timeout_ms": 1,
            "type": "strict_dns",
            "lb_type": "round_robin",
            "hosts": [
               {
                  "url": "tcp://app2:4568"
               }
            ]
         },
         {
            "name": "zipkin",
            "connect_timeout_ms": 1,
            "type": "strict_dns",
            "lb_type": "round_robin",
            "hosts": [
               {
                  "url": "tcp://zipkin:9411"
               }
            ]
         }
      ]
   },
   "admin": {
      "access_log_path": "/var/log/envoy.log",
      "address": "tcp://0.0.0.0:8001"
   },
   "tracing": {
      "http": {
         "driver": {
            "type": "zipkin",
            "config": {
               "collector_cluster": "zipkin",
               "collector_endpoint": "/api/v1/spans"
            }
         }
      }
   }
}